---
layout: post
title: "[DB & RS] Week 3"
date: 2024-09-30
category: [Data Business & Recommendation System]
---

> 📌통계 101 X 데이터 분석 **Chapter 6-7**

## 다양한 가설검정

### 해석의 기본 흐름

1. 확인하고 싶은 대상에 따라 귀무가설과 대립가설을 설정한다.
2. 데이터로 가설검정에 필요한 검정통계량을 계산한다.
3. 귀무가설이 옳다는 가정하에 통계량의 분포를 생각하고, 데이터로 계산한 통계량이 분포의 어느 위치에 있는지를 구하여 p값을 계산한다.

귀무가설이나 검정통계량(또는 그 분포)은 방법에 따라 달라지며, 필요한 검정통계량 역시 데이터 유형(양적 변수나 질적 변수)이나 성질에 따라 다르다. **가설검정 방법을 선택할 때는 다음에 설명하는 데이터 유형, 표본의 수, 양적 변수 분포의 성질을 먼저 확인해야 한다.**

### 데이터 유형에 따른 분석 방법

2개 변수 사이의 관계
<img src="/assets/images/240930/HowToAnalyze.png" alt="HowToAnalyze" >
왼쪽은 범주형 데이터마다 양적 데이터가 달라지는지를 조사할 때를, 가운데는 범주형 데이터끼리의 관계를 조사할 때를, 오른쪽은 양적 데이터끼리의 관계를 조사할 때를 나타낸 것.

- t검정은 양적 변수와 질적 변수라는 2가지 변수 사이의 관계를 조사한다.
- 2개의 범주형 변수 간의 관계도 있는데, 각 상태에 몇 개의 데이터가 있는지를 나타내는 표를 **분할표 contingency table**라 한다.
- 2개의 양적 변수 간의 관계도 있는데, x-y평면에 각 데이터를 점으로 찍는 **산점도**를 이용하기도 한다.

> 💡어느쪽이든 데이터 유형이 양적 변수인지 질적 변수인지에 따라 해석 방법이 달라지니, 먼저 데이터 유형부터 확인하여야 한다.

### 표본의 수

표본의 수도 분석 방법 선택에서 중요한 요소이다.

### 양적 변수의 성질

데이터에 양적 변수가 있는 경우, 이것이 **어떤 분포를 취하는지**가 검정 방법을 선택할 때 중요하다.

#### 모수검정 parametric test

모집단이 수학적으로 다룰 수 있는(parameter로 설명할 수 있는) 특정 분포를 따른다는 가정을 둔 가설검정을 모수검정이라 한다.

- 정규성 normality
  - 모수검정의 대부분은 모집단의 분포가 정규분포인 경우인데, 데이터가 정규분포로부터 얻어졌다고 간주할 수 있는 성질을 정규성이라 한다.

#### 비모수검정 nonparametric test

모집단분포가 특정 분포라고 가정할 수 없는 경우(좌우 비대칭 분포나 이상값이 있는 분포라면 평균과 표준편차의 값이 도움이 되지 않음), 평균이나 표준편차 등의 parameter(모수)에 기반을 두지 않는 비모수검정으로 분류되는 방법을 이용한다.

<img src="/assets/images/240930/NormalityofData.png" alt="Noramlity of Data">

#### 등분산성

집단 간 평균값을 비교하는 경우에는 집단끼리 분산이 동일하다고 가정하는 방법이 많은데, 분산이 같은 성질을 등분산성이라 한다.

## 대푯값 비교

### 모수검정의 평균값 비교

#### 일표본 t검정

**일표본 t검정**은 2가지 조건을 비교하는 것이 아니라 어떤 평균값의 모집단에서 표본을 얻었는가를 조사하는 것이다.

> - 귀무가설 "모집단의 평균은 μ=00이다"
> - 대립가설 "모집단의 평균은 μ=00이 아니다"

위의 내용을 전제로 하여 검증한다.
<img src="/assets/images/240930/일표본t검정의 원리.png" alt="Priciple of One Sample t-test">
95% 신뢰구간을 구하는 것과 α=0.05의 유의 수준으로 귀무가설을 검정하는 것은 x̄에서 생각할지 귀무가설 μ=00에서 생각할지의 차이뿐이기 때문에, 동전의 양면과 같은 관계이다.

#### 이표본 t검정

**이표본 t검정**은 2개 집단의 평균값을 비교한다. 아래의 내용을 전제로 하여 검정하는 것.

> - 귀무가설 "2개 집단의 평균값은 같다(평균값의 차이=0)"
> - 대립가설 "2개 집단의 평균값은 다르다(평균값의 차이≠0)"

t검정은 모수검정으로 분류되는 검정방법이기 때문에 데이터에 정규성이 있어야 한다.

- 일반적인 t검정에서는 등분산성을 가정.
- 분산이 일치하지 않는 경우에는 **웰치의 t검정**을 이용한다.
  - 웰치의 t검정은 일반적인 t검정을 개량한 것으로 2개 집단의 분산이 다르더라도 사용 가능하다. 단, 정규성은 있어야 한다.

#### 대응관계가 없는 검정과 대응관계가 있는 검정

<img src="/assets/images/240930/대응관계 유무에 따른 검정.png" alt="Test depending on Correspondence">

#### 정규성 조사

모수검정에서는 각 집단의 데이터에 정규성이 있어야 한다.
정규성을 조사하는 방법:

- 시각적으로 판단할 수 있는 **Q-Q 플롯** (분위수-분위수 그림)
- 가설검정으로 조사하는 **샤피로-윌크 검정**
- 이론적인 분포와 비교하는 **콜모고로프-스미르노프(K-S) 검정**

> - 귀무가설 "모집단이 정규분포이다."
> - 대립가설 "모집단이 정규분포가 아니다"

#### 등분산성 조사

t검정과 분산분석에는 데이터가 분산이 같은 모집단으로부터 획득되었다는 조건이 필요하다.
분산이 같다는 가설을 조사하는 검정으로:

- 바틀렛 검정
- 레빈 검정

> - 귀무가설 "2개 모집단의 분산은 같다."
> - 대립가설 "2개 모집단의 분산은 같지 않다."

### 비모수검정의 대푯값 비교

각 집단 데이터에 정규성이 없는 경우, 비모수검정으로 분류되는 방법을 사용하는 것이 권장된다. 이때는 평균값 대신 분포의 위치를 나타내는 대푯값에 주목하여 해석한다.

#### 윌콕슨 순위합 검정 Wilcoxon rank sum test

평균값 대신 각 데이터 값의 순위(크기 순으로 나열했을 때 몇 번째 위치인가를 나타내는 값)에 기반하여 검정을 실시한다.

> - 귀무가설 "2개 모집단의 위치가 같다"
> - 대립가설 "2개 모집단의 위치가 다르다"

<img src="/assets/images/240930/Wilcoxon.png" alt="Wilcoxon rank sum test">

#### 맨-휘트니 U 검정

이 방법을 사용하려면 비교할 2개 집단의 분포 모양 자체가 같아야 한다. 분포는 정규분포가 아니더라도 괜찮지만, 분산이 다르다면 문제가 발생할 수 있다.

#### 플리그너-폴리셀로 검정 Fligner-Policello test

#### 브루너-문첼 검정 Brunner-Munzel test

2개의 모집단의 분포 형태가 같지 않을 때도 사용할 수 있는 비모수검정 방법이다. 단, 극단적으로 분포 형태가 다른 경우에는 제1종 오류가 발생할 확률이 설정한 α와는 달라지므로 주의해야한다.

### 분산분석

**3개 이상 집단의 평균값을 비교하는 방법**을 분산분석(ANOVA, Analysis of variance)라 한다.
<img src="/assets/images/240930/ANOVA.png" alt="ANOVA">

> - 귀무가설 "모든 집단의 평균이 같다"
> - 대립가설 "적어도 한 쌍에는 차이가 있다."

분산분석의 원리:
<img src="/assets/images/240930/Principle of ANOVA.png" alt="Principle of ANOVA">
집단 내 변동은 동일 조건에서의 데이터 퍼짐이므로, 원래 존재하는 무작위 오차의 크기를 나타낸다. 반면, 집단 간 변동은 집단 간의 차이를 나타내며 집단 간 차이가 있다면 큰 데이터 퍼짐을, 차이가 없다면 집단 내 편차와 같은 정도로 작은 데이터 퍼짐을 기대할 수 있다.

#### F분포

> F값 = (평균적인 집단 간 변동) / (평균적인 집단 내 변동)

F값을 계산하여 검정통계량을 만들고, 이 양은 귀무가설이 올바르다는 가정하에 F분포라는 분포를 따른다.

F분포에서 관찰한 F값 이상으로 극단적인 값이 나올 확률이 p값이다.
<img src="/assets/images/240930/F Distribution.png" alt="분산분석의 검정통계량과 F분포">

### 다중비교 검정

## 비율 비교

### 범주형 데이터
