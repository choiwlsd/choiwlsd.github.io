---
layout: post
title: "Right test on Data"
date: 2024-10-01
category: [In-depth exploration]
---

# 데이터의 성질에 맞는 검정 방법을 선택하는 것이 왜 중요한가?

## 데이터의 특성

데이터의 성질에 맞는 통계 검정 방법들은 다양한 유형의 데이터 특성에 따라 선택되는데, 데이터의 특성에는 무엇이 있는지 조사해보았다.

### 1. 정규성 Normality

데이터가 **정규 분포(Normal Distribution)를 따르는지** 여부를 나타낸다. 정규 분포는 대칭 분포로, 평균을 기준으로 좌우가 대칭적이고, 대부분의 데이터가 중앙에 집중되어 있으며, 양 끝으로 갈수록 값이 적어지는 분포를 의미한다.

### 2. 독립성 Independence

독립성은 **각 데이터가 서로 독립적으로 수집되었는가**를 의미한다. 한 데이터 포인트가 다른 데이터 포인트에 영향을 미치지 않는 상태를 말하며, 독립성은 집단 간 비교 시 매우 중요하다.

### 3. 등분산성 Homogeneity of Variances, Homoscedasticity

등분산성은 **여러 그룹 간의 분산이 동일한지**를 나타낸다.

## 데이터에 따른 적절한 검정 방법

### Normality Test

#### 정규 분포 데이터

- **t-검정 t-Test**

  - "데이터가 정규 분포를 따르는 경우" 사용
    - t-검정은 표본 평균이 정규 분포를 따른다는 가정 하에 유의미한 차이가 있는지 평가하는 검정방법으로, 정규 분포 데이터에서 적절하게 작동한다.
    - 정규성을 띄지 않는 데이터에서 t-검정을 사용하게 된다면 무의한 결과를 얻게 될 가능성이 크다.

- **분산분석 ANOVA, Analysis of Variance**

  - "데이터가 정규 분포를 따르며, 여러 그룹 간의 평균 차이를 비교할 때" 사용한다.
    - 분산분석은 다수의 집단 간의 평균 차이를 비교하며, 정규성 및 분산의 동질성 가정하에서 수행된다.
    - 비정규 분포 데이터에서는 왜곡된 결과가 나올 수 있다.

- **Q-Q Plot**
- **샤피로-윌크 검정**
- **콜모고로프-스미르노프(K-S) 검정**

#### 비정규 분포 데이터

- **비모수 검정 Non-parametric tests**

  - **Mann-Whitney U 검정**: 두 독립 집단 비교
  - **Wilcoxon 부호 순위 검정**: 대응표본 비교
  - **Kruskal-Wallis 검정**: 세 집단 이상 비교
    - 비모수 검정은 정규 분포 가정이 필요 없고 순위 기반으로 검정을 수행한다.
    - 데이터가 비정규 분포일 때 모수적 검정을 사용하면 유의미한 결과를 도출하지 못할 수 있기 때문에 비모수검정이 적절하다.

- **플리그너-폴리셀로 검정 Fligner-Plicello test**
- **브루너-문첼 검정 Brunner-Munzel test**
- **스틸-드와스 검정 Steel-Dwass test**

### Independence Test

#### 독립 데이터

- **독립표본 t-검정**
  - "두 집단의 데이터가 독립적일 때" 사용한다.
    - 독립 표본 간 평균 차이를 비교하기 위한 검정이며, 각 표본 간 상호작용이 없다는 가정이 충족되어야 한다.
- **Mann-Whitney U 검정**
  - 비정규 분포 데이터의 독립 표본 비교
  - "두 독립 집단이 비정규 분포를 따를 때" 사용한다.
    - 비모수적 방법이므로 비정규 분포 데이터에서도 정확한 결과를 제공한다.

#### 종속(대응) 데이터

- **대응표본 t-검정 Paried t-test**
  - "동일한 집단 내에서 사전-사후 데이터를 비교할 때" 사용한다.
    - 두 표본이 동일 집단에서 나온 종속적인 데이터일 경우, 대응표본 t-검정이 종속성을 고려해 차이를 평가한다.
- **Wilcoxon 부호 순위 검정 (Wilcoxon Rank-Sum Test)**
  - 대응 데이터의 비정규 분포
  - "대응 표본이 비정규 분포를 따를 때" 사용한다.
    - 비모수 검정은 정규성을 가정하지 않으므로, 데이터가 정규 분포가 아닐 때에도 적절하게 적용할 수 있다.

### Homoscedasticity test

#### 분산이 동일한 경우

- **ANOVA, Analysis of Variance**

  - "여러 집단의 평균을 비교할 때, 각 그룹의 분산이 동일하다면" 분산분석을 사용한다.
    - 분산분석은 집단 간 분산이 동일할 때 그룹간 차이를 정확하게 평가할 수 있다.
    - 분산이 다를 경우에는 결과가 왜곡될 수 있다.

- **바틀렛 검정**
- **레빈 검정**

#### 분산이 다른 경우

- **Welch's ANOVA**
  - "여러 집단 간 평균을 비교하되, 분산이 다를 때" 사용한다.
    - 웰치 검정은 분산의 동질성 가정을 하지 않기 때문에 분산이 다른 집단 간의 차이를 비교할 수 있다.
- **Welch's t-검정**
  - "두 독립 집단의 분산이 다를 때" 사용한다.
    - 일반 t-검정은 분산이 동일해야 하지만, Welch's t-test는 분산이 다를 때에도 정확한 검정 결과를 제공한다.

### 정규분포 + 독립 데이터

- 두 독립 진단의 비교:
  - 독립표본 t-검정 (Independent Samples t-test)
    - 두 독립 집단 간 평균 차이를 비교할 때 사용한다.
- 세 집단 이상의 비교:
  - ANOVA(분산분석, Analysis of Variance)
    - 세 집단 이상의 평균 차이를 비교할 때 사용한다.

### t-Test와 Welch's t-Test의 차이

<img src="/public/img/241001/Diff of 2 t-test.png" alt="Difference between t-Test and Welch's t-Test">

위 그림에서의 기호들:

- 각각 집단 1과 집단 2의 표본 평균.
- 각각 집단 1과 집단 2의 표본 크기
- sp: 두 집단의 합동 표준편차 Pooled Standard Deviation
- s1^2, s2^2: 각각 집단 1과 집단 2의 표준 분산

#### Welch's t-Test가 유리한 경우

- 두 집단의 분산이 현저히 다를 때
- 두 집단의 표본 크기가 크게 다를 때
- 등분산성을 만족하지 않는 경우에도 검정의 유효성을 유지할 수 있기 때문에, 데이터 특성이 이분산성을 보일 가능이 있다면 Welch's t-test를 사용하는 것이 일반적으로 더 안전하다.
