<!DOCTYPE HTML>
<html lang="en" >
    <head>

        {%- include head.html -%}

        {% assign reversed_posts = site.posts | reverse %}

        {% if reversed_posts %}
            <link rel="next" href="{{site.baseurl}}{{reversed_posts.first.url}}" />
        {% endif %}
    </head>
    <body>
        <div class="book">

            {%- include toc-date.html -%}

            <div class="book-body">
                <div class="book-header" role="navigation">
                    <!-- Title -->
                    <h1>
                        <i class="fa fa-circle-o-notch fa-spin"></i>
                        {% if page.title %}
                            <a href="." >{{ page.title | escape }}</a>
                        {% else %}
                            <a href="." >{{ site.title | escape }}</a>
                        {% endif %}
                    </h1>
                </div>

                <div class="body-inner">
                    {%- include body.html -%}

                    <a href="{{site.baseurl}}/" class="navigation navigation-pre navigation-unique">
                        <i class="fa"></i>
                    </a>

                    {% if reversed_posts %}
                        <a href="{{site.baseurl}}{{reversed_posts.first.url}}" class="navigation navigation-next navigation-unique" aria-label="Next page: {{reversed_posts.first.title}}">
                            <i class="fa fa-angle-right"></i>
                        </a>
                    {% endif %}
                </div>
            </div>

            <!-- ① JSON 데이터만 담아두는 블록 (JS가 아니라서 린터가 무시) -->
            <script type="application/json" id="page-meta">
            {%- include metadata-home.json.tpl -%}
            </script>

            <!-- ② 실제 실행되는 자바스크립트 -->
            <script>
            // gitbook 객체 준비
            var gitbook = gitbook || [];
            gitbook.push(function () {
                // ①에서 넣어둔 JSON을 읽어 JS 객체로 변환
                var pageMeta = JSON.parse(
                document.getElementById('page-meta').textContent
                );

                // gitbook에 전달
                gitbook.page.hasChanged(pageMeta);
            });
            </script>

        </div>

        {%- include footer.html -%}

    </body>
</html>